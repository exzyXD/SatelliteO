<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Added viewport-fit=cover for full screen on iPhone with notch -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Satellite Control Center</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        @keyframes dash {
          to { stroke-dashoffset: -20; }
        }
        .animate-dash {
          animation: dash 1s linear infinite;
        }
        @keyframes ripple {
          0% { transform: scale(1); opacity: 0.5; }
          100% { transform: scale(2.5); opacity: 0; }
        }
        .animate-ripple {
          animation: ripple 2s infinite ease-out;
        }
        
        body {
            overscroll-behavior-y: contain;
            touch-action: none;
            background-color: black;
        }
    </style>
</head>
<body class="bg-black text-white m-0 p-0 overflow-hidden h-[100dvh] w-screen">

    <div id="root" class="h-full w-full"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'https://esm.sh/react@18.2.0';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            Wifi, Plane, Bluetooth, Share2, Music, Play, SkipForward, SkipBack, 
            Sun, Volume2, Satellite, Globe, Activity, ArrowUp, ArrowDown, X, 
            Smartphone, Signal, Battery, Lock, Moon, Flashlight, Disc, Cast, 
            RotateCw, Focus, Loader2, ChevronUp 
        } from 'https://esm.sh/lucide-react@0.292.0';

        const ControlCenterContent = ({ onClose }) => {
            const [time, setTime] = useState(new Date());
            
            // Toggles
            const [airplaneMode, setAirplaneMode] = useState(false);
            const [wifi, setWifi] = useState(true);
            const [bluetooth, setBluetooth] = useState(true);
            const [rotationLock, setRotationLock] = useState(true); 
            const [flashlight, setFlashlight] = useState(false);
            const [recording, setRecording] = useState(false);
            
            // Satellite Logic
            const [satelliteViewOpen, setSatelliteViewOpen] = useState(false);
            const [satStatus, setSatStatus] = useState('disconnected'); 
            const [connectionStep, setConnectionStep] = useState(''); 
            
            // Data Stats
            const [signalStrength, setSignalStrength] = useState(0);
            const [downloadSpeed, setDownloadSpeed] = useState(0);
            const [uploadSpeed, setUploadSpeed] = useState(0);
            const [ping, setPing] = useState(0);
            
            // Sliders
            const [brightness, setBrightness] = useState(50);
            const [volume, setVolume] = useState(75);

            useEffect(() => {
                const timer = setInterval(() => setTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            // Search Simulation
            useEffect(() => {
                let interval;
                if (satelliteViewOpen && satStatus === 'searching') {
                    let progress = 0;
                    setDownloadSpeed(0); setUploadSpeed(0); setPing(0);
                    interval = setInterval(() => {
                        progress += 2; 
                        setSignalStrength(prev => Math.min(prev + 2, 40)); 
                        if (progress >= 100) { setSatStatus('ready'); clearInterval(interval); }
                    }, 50);
                } else if (!satelliteViewOpen) {
                    setSatStatus('disconnected'); setSignalStrength(0);
                    setDownloadSpeed(0); setUploadSpeed(0); setPing(0); setConnectionStep('');
                }
                return () => clearInterval(interval);
            }, [satelliteViewOpen, satStatus]);

            // Connection Steps
            useEffect(() => {
                if (satStatus === 'connecting') {
                    setConnectionStep("Authenticating Device...");
                    const s2 = setTimeout(() => setConnectionStep("Aligning Beam..."), 1000);
                    const s3 = setTimeout(() => setConnectionStep("Registering Network..."), 2200);
                    const fin = setTimeout(() => { setSatStatus('connected'); setConnectionStep(""); }, 3500);
                    return () => { clearTimeout(s2); clearTimeout(s3); clearTimeout(fin); };
                }
            }, [satStatus]);

            // Traffic Simulation
            useEffect(() => {
                let interval;
                if (satStatus === 'ready') {
                    setPing(prev => prev === 0 ? 450 : prev + (Math.random() * 20 - 10)); 
                    setDownloadSpeed(prev => Math.max(0.5, 2 + (Math.random() * 2 - 1))); 
                    setUploadSpeed(prev => Math.max(0.1, 0.5 + (Math.random() * 0.2 - 0.1))); 
                    interval = setInterval(() => {
                        setPing(p => Math.min(600, Math.max(300, p + (Math.random() * 40 - 20))));
                        setDownloadSpeed(s => Math.max(0, 2 + (Math.random() * 3 - 1.5)));
                    }, 1000);
                } else if (satStatus === 'connected') {
                    const targetSpeed = 800; const targetPing = 20;
                    interval = setInterval(() => {
                        setDownloadSpeed(prev => prev < targetSpeed ? prev + (targetSpeed - prev) * 0.05 + Math.random() * 10 : targetSpeed + (Math.random() * 40 - 20));
                        setUploadSpeed(prev => prev < 150 ? prev + 2 : 150 + (Math.random() * 10 - 5));
                        setPing(prev => prev > targetPing ? prev - (prev - targetPing) * 0.1 : targetPing + (Math.random() * 10 - 5));
                        setSignalStrength(prev => Math.min(100, prev + 1));
                    }, 50); 
                }
                return () => clearInterval(interval);
            }, [satStatus]);

            const handleConnectClick = () => { if (satStatus === 'ready') setSatStatus('connecting'); };

            return (
                <div className="w-full h-full flex flex-col relative">
                    {/* --- CONTROL CENTER GRID --- */}
                    {/* Increased top padding (pt-14) for iPhone notch safety */}
                    <div className={`flex-1 p-4 pt-14 flex flex-col gap-4 transition-transform duration-500 overflow-y-auto no-scrollbar ${satelliteViewOpen ? 'scale-90 opacity-0 pointer-events-none' : 'scale-100 opacity-100'}`}>
                        {/* ROW 1 */}
                        <div className="grid grid-cols-4 gap-4 h-40 shrink-0">
                            <div className="col-span-2 bg-neutral-800/60 backdrop-blur-2xl rounded-[28px] p-3 grid grid-cols-2 gap-3 shadow-lg border border-white/5">
                                <SmallToggle active={airplaneMode} onClick={() => setAirplaneMode(!airplaneMode)} icon={<Plane size={20} className="rotate-45" />} activeColor="bg-orange-500" inactiveColor="bg-white/10" />
                                <SmallToggle active={false} onClick={() => {}} icon={<Signal size={20} />} activeColor="bg-green-500" inactiveColor="bg-white/10" />
                                <SmallToggle active={wifi} onClick={() => setWifi(!wifi)} icon={<Wifi size={20} />} activeColor="bg-blue-500" inactiveColor="bg-white/10" />
                                <SmallToggle active={bluetooth} onClick={() => setBluetooth(!bluetooth)} icon={<Bluetooth size={20} />} activeColor="bg-blue-500" inactiveColor="bg-white/10" />
                            </div>
                            <div className="col-span-2 bg-neutral-800/60 backdrop-blur-2xl rounded-[28px] p-4 flex flex-col justify-between shadow-lg border border-white/5 relative overflow-hidden">
                                <div className="absolute top-4 right-4 text-neutral-500"><Signal size={16} className="animate-pulse opacity-50"/></div>
                                <div className="mt-2 text-center w-full"><div className="text-sm font-medium text-neutral-200">Not Playing</div><div className="text-[10px] text-neutral-500">Music</div></div>
                                <div className="flex justify-between items-center px-1 text-neutral-400 mt-2">
                                    <SkipBack size={24} fill="currentColor" />
                                    <Play size={28} fill="currentColor" className="text-white" />
                                    <SkipForward size={24} fill="currentColor" />
                                </div>
                            </div>
                        </div>
                        {/* ROW 2 */}
                        <div className="grid grid-cols-4 gap-4 h-40 shrink-0">
                            <div className="col-span-2 grid grid-cols-2 gap-4 h-full">
                                <button onClick={() => setRotationLock(!rotationLock)} className={`w-full h-18 rounded-[28px] flex items-center justify-center transition-all duration-300 shadow-lg ${rotationLock ? 'bg-white text-red-500' : 'bg-neutral-800/60 text-white border border-white/5'}`}><RotateCw size={26} strokeWidth={2.5} className={rotationLock ? '' : 'opacity-80'} /></button>
                                <button className="w-full h-18 rounded-[28px] bg-neutral-800/60 backdrop-blur-2xl flex items-center justify-center text-white shadow-lg border border-white/5 active:bg-neutral-700"><Cast size={24} /></button>
                                <button className="col-span-2 h-[72px] rounded-[28px] bg-neutral-800/60 backdrop-blur-2xl flex items-center px-4 gap-3 shadow-lg border border-white/5 active:bg-neutral-700 mt-auto"><div className="w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-300 shrink-0"><Moon size={16} fill="currentColor" /></div><div className="flex flex-col text-left"><span className="text-sm font-semibold">Focus</span></div></button>
                            </div>
                            <div className="col-span-1 bg-neutral-800/60 backdrop-blur-2xl rounded-[28px] relative flex flex-col justify-end p-0 overflow-hidden shadow-lg border border-white/5 group">
                                <div className="absolute bottom-0 left-0 right-0 bg-white transition-all duration-100" style={{ height: `${brightness}%` }}></div>
                                <div className="absolute inset-0 flex flex-col items-center justify-end pb-5 pointer-events-none"><Sun size={28} className={`transition-colors duration-300 ${brightness > 50 ? 'text-neutral-500' : 'text-white'}`} /></div>
                                <input type="range" min="0" max="100" value={brightness} onChange={(e) => setBrightness(e.target.value)} className="absolute inset-0 opacity-0 cursor-pointer w-full h-full" />
                            </div>
                            <div className="col-span-1 bg-neutral-800/60 backdrop-blur-2xl rounded-[28px] relative flex flex-col justify-end p-0 overflow-hidden shadow-lg border border-white/5 group">
                                <div className="absolute bottom-0 left-0 right-0 bg-white transition-all duration-100" style={{ height: `${volume}%` }}></div>
                                <div className="absolute inset-0 flex flex-col items-center justify-end pb-5 pointer-events-none"><Volume2 size={28} className={`transition-colors duration-300 ${volume > 50 ? 'text-neutral-500' : 'text-white'}`} /></div>
                                <input type="range" min="0" max="100" value={volume} onChange={(e) => setVolume(e.target.value)} className="absolute inset-0 opacity-0 cursor-pointer w-full h-full" />
                            </div>
                        </div>
                        {/* ROW 3 */}
                        <div className="grid grid-cols-4 gap-4 h-18 shrink-0">
                            <button onClick={() => setFlashlight(!flashlight)} className={`col-span-1 h-[72px] rounded-[36px] flex items-center justify-center transition-all duration-300 shadow-lg ${flashlight ? 'bg-white text-black' : 'bg-neutral-800/60 text-white border border-white/5'}`}><Flashlight size={24} fill={flashlight ? "currentColor" : "none"} /></button>
                            <button onClick={() => setRecording(!recording)} className={`col-span-1 h-[72px] rounded-[36px] flex items-center justify-center transition-all duration-300 shadow-lg ${recording ? 'bg-white text-red-500' : 'bg-neutral-800/60 text-white border border-white/5'}`}><Disc size={24} className={recording ? "animate-pulse" : ""} /></button>
                            <button onClick={() => { setSatelliteViewOpen(true); setSatStatus('searching'); }} className={`col-span-2 h-[72px] rounded-[36px] flex items-center justify-center gap-3 transition-all duration-300 shadow-lg border border-white/5 active:scale-95 ${satStatus === 'connected' ? 'bg-white text-blue-600' : 'bg-neutral-800/60 text-white'}`}><Satellite size={24} className={satStatus === 'connected' ? 'animate-pulse' : ''} /><span className="font-semibold text-sm">Satellite</span></button>
                        </div>
                    </div>

                    {/* --- SATELLITE INTERFACE OVERLAY --- */}
                    <div className={`absolute inset-0 bg-black/95 backdrop-blur-3xl z-50 transition-all duration-500 flex flex-col ${satelliteViewOpen ? 'translate-y-0 opacity-100' : 'translate-y-full opacity-0'}`}>
                        {/* Close Button - Positioned safely below notch */}
                        <div className="pt-14 px-6 flex justify-end"><button onClick={() => setSatelliteViewOpen(false)} className="w-9 h-9 bg-neutral-800 rounded-full flex items-center justify-center text-neutral-400 hover:text-white active:scale-90 transition-all"><X size={18} /></button></div>
                        <div className="flex-1 flex flex-col items-center justify-center -mt-10 px-6">
                            <h2 className="text-2xl font-bold mb-2 tracking-tight text-white min-h-[32px] transition-all duration-300 text-center">{satStatus === 'searching' && "Searching Signal"}{satStatus === 'ready' && "Weak Signal Found"}{satStatus === 'connecting' && connectionStep}{satStatus === 'connected' && "High Speed Link"}</h2>
                            <p className="text-neutral-400 text-sm mb-12 text-center max-w-[250px] leading-relaxed h-10 transition-opacity duration-300">{satStatus === 'searching' && "Calibrating antenna..."}{satStatus === 'ready' && "Connection unstable. Optimization required."}{satStatus === 'connecting' && "Please wait while we establish a secure connection."}{satStatus === 'connected' && "Stable connection established. Maximum throughput."}</p>
                            <div className="relative w-72 h-72 flex items-center justify-center mb-12">
                                <div className="absolute inset-0 border border-white/5 rounded-full" /><div className="absolute inset-12 border border-white/5 rounded-full" /><div className="absolute inset-24 border border-white/5 rounded-full" />
                                {satStatus === 'connected' && (<svg className="absolute inset-0 w-full h-full z-0 pointer-events-none overflow-visible"><line x1="50%" y1="50%" x2="50%" y2="8%" stroke="#4ade80" strokeWidth="2" strokeDasharray="6,4" strokeOpacity="0.6" className="animate-dash" /><line x1="50%" y1="50%" x2="85%" y2="82%" stroke="#4ade80" strokeWidth="2" strokeDasharray="6,4" strokeOpacity="0.6" className="animate-dash" /></svg>)}
                                <div className={`absolute w-full h-full rounded-full bg-gradient-to-t from-transparent via-transparent ${satStatus === 'connected' ? 'opacity-0' : satStatus === 'ready' ? 'to-orange-500/20' : satStatus === 'connecting' ? 'to-white/30 duration-[0.5s]' : 'to-blue-500/20'} ${satStatus === 'connecting' ? 'animate-spin duration-700' : 'animate-spin'} transition-all`} style={{clipPath: 'polygon(50% 50%, 0 0, 100% 0)'}}></div>
                                {satStatus === 'connected' && (<><div className="absolute inset-0 rounded-full border border-green-500/30 animate-ripple"></div><div className="absolute inset-12 rounded-full border border-green-500/30 animate-ripple" style={{animationDelay: '0.5s'}}></div></>)}
                                <div className={`w-24 h-24 bg-neutral-900 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(59,130,246,0.2)] z-10 border relative transition-all duration-500 ${satStatus === 'connected' ? 'border-green-500/50 shadow-[0_0_50px_rgba(74,222,128,0.3)]' : satStatus === 'connecting' ? 'border-white/50 shadow-[0_0_50px_rgba(255,255,255,0.2)]' : 'border-white/10'}`}><div className={`absolute inset-0 rounded-full ${satStatus === 'connected' ? 'bg-green-500/10' : satStatus === 'connecting' ? 'bg-white/10' : 'bg-red-500/10'} animate-pulse`}></div><Globe size={48} className={`relative z-10 transition-colors duration-500 ${satStatus === 'connected' ? 'text-green-400' : satStatus === 'ready' ? 'text-orange-500' : satStatus === 'connecting' ? 'text-white' : 'text-neutral-600'}`} strokeWidth={1.5} /></div>
                                {(satStatus === 'connected' || satStatus === 'ready' || satStatus === 'connecting') && (<><div className={`absolute top-4 left-1/2 -translate-x-1/2 flex items-center justify-center transition-all duration-500 ${satStatus === 'connected' ? 'scale-110' : 'scale-100'}`}>{satStatus === 'connected' && <div className="absolute w-8 h-8 border border-green-500/50 rounded-full animate-ping opacity-75"></div>}<div className={`w-3 h-3 rounded-full shadow-[0_0_10px_currentColor] z-20 transition-colors duration-500 ${satStatus === 'connected' ? 'bg-green-400 text-green-400' : satStatus === 'connecting' ? 'bg-white text-white' : 'bg-orange-500 text-orange-500'}`} /></div><div className={`absolute bottom-12 right-8 flex items-center justify-center transition-all duration-500 ${satStatus === 'connected' ? 'scale-110' : 'scale-100'}`}>{satStatus === 'connected' && <div className="absolute w-6 h-6 border border-green-500/50 rounded-full animate-ping opacity-75"></div>}<div className={`w-2 h-2 rounded-full z-20 transition-colors duration-500 ${satStatus === 'connected' ? 'bg-green-400 shadow-[0_0_10px_rgba(74,222,128,0.8)]' : satStatus === 'connecting' ? 'bg-white' : 'bg-orange-500/50'}`} /></div></>)}
                            </div>
                            <div className={`w-full bg-neutral-800/30 backdrop-blur-md rounded-[32px] p-5 grid grid-cols-2 gap-3 transition-all duration-700 border border-white/5 ${satStatus !== 'searching' ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}>
                                <div className="col-span-2 flex items-center justify-between pb-3 border-b border-white/5 mb-1"><div className="flex items-center gap-2"><Activity className={`${satStatus === 'connected' ? 'text-green-400' : satStatus === 'connecting' ? 'text-white' : 'text-orange-500'}`} size={16} /><span className="font-medium text-sm text-neutral-300">Ping</span></div><span className={`text-lg font-bold font-mono ${satStatus === 'connected' ? 'text-green-400' : satStatus === 'connecting' ? 'text-white' : 'text-orange-500'}`}>{satStatus === 'connecting' ? '...' : `${Math.floor(ping)} ms`}</span></div>
                                <div className="bg-neutral-900/40 p-3 rounded-2xl flex flex-col items-center text-center transition-all duration-300 border border-transparent hover:border-white/5"><span className="text-[10px] font-bold text-neutral-500 mb-1 flex items-center justify-center gap-1 w-full tracking-wider">DOWNLOAD</span><span className={`text-xl font-bold font-mono ${satStatus === 'connected' ? 'text-white' : 'text-neutral-400'}`}>{satStatus === 'connecting' ? '...' : Math.floor(downloadSpeed)}</span><span className="text-[10px] text-neutral-500">Mbps</span></div>
                                <div className="bg-neutral-900/40 p-3 rounded-2xl flex flex-col items-center text-center transition-all duration-300 border border-transparent hover:border-white/5"><span className="text-[10px] font-bold text-neutral-500 mb-1 flex items-center justify-center gap-1 w-full tracking-wider">UPLOAD</span><span className={`text-xl font-bold font-mono ${satStatus === 'connected' ? 'text-white' : 'text-neutral-400'}`}>{satStatus === 'connecting' ? '...' : Math.floor(uploadSpeed)}</span><span className="text-[10px] text-neutral-500">Mbps</span></div>
                            </div>
                            <div className={`w-full mt-8 transition-all duration-500 ${satStatus !== 'searching' ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4 pointer-events-none'}`}>
                                <button onClick={handleConnectClick} disabled={satStatus === 'connected' || satStatus === 'connecting'} className={`h-12 w-full rounded-full font-bold transition-all duration-300 flex items-center justify-center gap-2 ${satStatus === 'connected' ? 'bg-green-500 text-black shadow-[0_0_30px_rgba(34,197,94,0.4)] scale-100 cursor-default' : satStatus === 'connecting' ? 'bg-neutral-800 text-neutral-400 cursor-wait' : 'bg-white text-black hover:bg-neutral-200 active:scale-95 shadow-[0_0_20px_rgba(255,255,255,0.2)]'}`}>
                                    {satStatus === 'connected' ? (<React.Fragment><Wifi size={18} />Connected</React.Fragment>) : satStatus === 'connecting' ? (<React.Fragment><Loader2 size={18} className="animate-spin" />Connecting...</React.Fragment>) : 'Connect'}
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    {!satelliteViewOpen && (
                        <div 
                            className="absolute bottom-2 left-0 right-0 h-10 flex flex-col items-center justify-end pb-2 z-40 opacity-50 cursor-pointer"
                            onClick={onClose}
                        >
                            <ChevronUp size={24} className="animate-bounce" />
                        </div>
                    )}
                </div>
            )
        };

        const SmallToggle = ({ active, onClick, icon, activeColor, inactiveColor }) => {
            return (
                <button onClick={onClick} className={`w-full h-full rounded-full flex items-center justify-center transition-all duration-300 active:scale-90 ${active ? activeColor + ' text-white' : inactiveColor + ' text-neutral-400'}`}>{icon}</button>
            )
        }

        const SatelliteApp = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [touchStart, setTouchStart] = useState(null);
            const [touchEnd, setTouchEnd] = useState(null);

            const onTouchStart = (e) => {
                setTouchEnd(null);
                setTouchStart(e.targetTouches[0].clientY);
            }

            const onTouchMove = (e) => setTouchEnd(e.targetTouches[0].clientY);

            const onTouchEnd = () => {
                if (!touchStart || !touchEnd) return;
                const distance = touchStart - touchEnd;
                const minSwipe = 50;

                if (distance < -minSwipe) setIsOpen(true);
                if (distance > minSwipe) setIsOpen(false);
            }

            return (
                <div 
                    className="relative w-full h-full overflow-hidden bg-black"
                    onTouchStart={onTouchStart} 
                    onTouchMove={onTouchMove} 
                    onTouchEnd={onTouchEnd}
                >
                    <div 
                        className="absolute inset-0 bg-cover bg-center bg-no-repeat transition-transform duration-500 z-0"
                        style={{ 
                            backgroundImage: "url('https://i.postimg.cc/tTYTgBDY/photo-2025-12-04-20-15-17.jpg')",
                            transform: isOpen ? 'scale(0.95) brightness(0.5)' : 'scale(1) brightness(1)'
                        }}
                    >
                    </div>

                    <div 
                        className={`absolute inset-0 z-50 transition-all duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]
                            ${isOpen ? 'translate-y-0 opacity-100' : '-translate-y-full opacity-0 pointer-events-none'}
                        `}
                    >
                        <div className="absolute inset-0 bg-neutral-900/60 backdrop-blur-3xl"></div>
                        <ControlCenterContent onClose={() => setIsOpen(false)} />
                    </div>

                    {!isOpen && (
                        <div className="absolute top-2 left-0 right-0 h-8 flex justify-center items-start z-40 opacity-60">
                            <div className="w-12 h-1.5 bg-white/50 rounded-full shadow-sm backdrop-blur-sm"></div>
                        </div>
                    )}
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<SatelliteApp />);
    </script>
</body>
</html>
